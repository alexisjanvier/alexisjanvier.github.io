<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Yarn &middot; Alexis Janvier</title>
        <meta name="description" content="Parfois, les outils javascript semblent être des effets de mode. Mais devant le nombre de retours positifs sur projet Yarn, cela doit quand même valoir le coup d&#39;y jeter un coup d’œil.">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.18-DEV" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="http://alexisjanvier.github.io/css/normalize.css">
        <link rel="stylesheet" href="http://alexisjanvier.github.io/css/highlight.css">
        <link rel="stylesheet" href="http://alexisjanvier.github.io/css/style.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    </head>
    <body>
        
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'XXX', 'auto');
ga('send', 'pageview');
</script>


        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a title="Yarn" href="http://alexisjanvier.github.io/">Yarn</a>
                            </h1>
                        
                        <a class="button-square" href="http://alexisjanvier.github.io/index.xml"><i class="fa fa-rss"></i></a>
                        
                            <a class="button-square button-social hint--top" data-hint="Twitter" title="Twitter" href="https://twitter.com/alexisjanvier">
                                <i class="fa fa-twitter"></i>
                            </a>
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" title="Github" href="https://github.com/alexisjanvier">
                                <i class="fa fa-github-alt"></i>
                            </a>
                        
                        
                        
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a title="Blog" href="/blog">Blog</a>
    </li>

    <li class="site-nav-item">
        <a title="About" href="/about">About</a>
    </li>

                    </ul>
                </div>
            </header>

            <div id="container">

<div class="container">
    <article class="post-container">
        <header class="post-header">
    <h1 class="post-title">Yarn</h1>
    
        <p class="post-description">Parfois, les outils javascript semblent être des effets de mode. Mais devant le nombre de retours positifs sur projet Yarn, cela doit quand même valoir le coup d&#39;y jeter un coup d’œil.</p>
    
</header>

        <div class="post-content clearfix">
    

    

<p><code>npm</code> n&rsquo;est sans doute pas l&rsquo;outil le plus handicapant de la stack javascript. C&rsquo;est même franchement bien. Mais, c&rsquo;est vrai, c&rsquo;est parfois lent,
parfois surprenant dans un worflow d&rsquo;intégration continue, et le <code>npm shrinkwrap</code> est parfois plus source de problèmes que de solutions. Ce que promet <a href="https://yarnpkg.com/">Yarn</a>: de la rapidité et une bonne gestion des versions des modules.</p>

<h2 id="premier-test-en-local">Premier test en local</h2>

<p>Yarn s&rsquo;installe très simplement avec &hellip; <code>npm</code>:</p>

<pre><code>npm i -g yarn
</code></pre>

<p>Je vais tester sur un projet ayant beaucoup (trop ;) ) de dépendances: le <a href="https://github.com/marmelab/javascript-boilerplate">boilereplate javascript</a> de Marmelab.
Pour une première installation, après clonage du repo, voilà le comparatif:</p>

<pre><code>npm: 1min 30s
yarn: 1min 17s
</code></pre>

<p>Rien de très fulgurant. Le projet n&rsquo;avait pas de fichier <code>npm-shrinkwrap.json</code>, ni de fait de <code>yarn.lock</code>.
  Après avoir supprimer le répertoire <code>node_modules</code>, je relance une installation. Maintenant, le résultat est beaucoup plus probant.</p>

<pre><code>npm: 1min 11s
yarn: 15s
</code></pre>

<p>Effectivement, une fois le cache chauffé, Yarn est vraiment plus rapide</p>

<h2 id="yarn-dans-un-docker">Yarn dans un docker</h2>

<p>Si npm est un peu lent, c&rsquo;est rarement un problème en cours de développement en local. Par contre, cela peut être plus problématique pour les builds et les tests sur un serveur d&rsquo;intégration continue.
Je conseille donc l&rsquo;article de Martino Fornasa, <a href="https://hackernoon.com/using-yarn-with-docker-c116ad289d56#.rz7m1fh58">Using Yarn with Docker</a></p>

<h2 id="conclusion">Conclusion</h2>

<p>Il s&rsquo;agit d&rsquo;un test très rapide, mais en partie concluant. Je ne pense pas utiliser Yarn sur des projets clients pour le moment.
Mais comme outil quotidien pour des tests ou des projets perso, oui, sûrement. Je ne suis pas fan de l&rsquo;idée que Facebook soit en train de truster tellement d&rsquo;outils js.
Et qui sait, cela mettra j&rsquo;espère un coup de fouet à l&rsquo;équipe de npm pour que la v4 revienne avec un gain de performance conséquent.</p>

<h3 id="note">Note</h3>

<p><a href="https://shift.infinite.red/npm-vs-yarn-cheat-sheet-8755b092e5cc#.8dakk7y15">une cheat-sheet yarn vs npm</a></p>

</div>

        <footer class="post-footer clearfix">
    
        <p class="post-tags">
            <span>Tagged:</span>
            
                 <a href="/tags/javascript/">javascript</a>
            
                 <a href="/tags/module/">module</a>
            
                 <a href="/tags/npm/">npm</a>
            
                 <a href="/tags/tool/">tool</a>
            
        </p>
    

    <div class="share">
        <a class="icon-twitter" href="http://twitter.com/share?text=Yarn&url=http%3a%2f%2falexisjanvier.github.io%2fblog%2fyarn%2f"
            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
            <i class="fa fa-twitter"></i>
            <span class="hidden">Twitter</span>
        </a>

        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2falexisjanvier.github.io%2fblog%2fyarn%2f"
            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <i class="fa fa-facebook"></i>
            <span class="hidden">Facebook</span>
        </a>

        <a class="icon-google-plus" href="https://plus.google.com/share?url=http%3a%2f%2falexisjanvier.github.io%2fblog%2fyarn%2f"
           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
           <i class="fa fa-google-plus"></i>
            <span class="hidden">Google+</span>
        </a>
    </div>
</footer>
    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a title="Yarn" href="http://alexisjanvier.github.io/">Yarn</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2016 / Powered by <a href="http://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
                </p>
            </div>
        </footer>

        <script src="http://alexisjanvier.github.io/js/jquery-1.11.3.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
        <script src="http://alexisjanvier.github.io/js/jquery.fitvids.js"></script>
        <script src="http://alexisjanvier.github.io/js/scripts.js"></script>
    </body>
</html>

